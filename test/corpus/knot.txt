===========
Single knot
===========

=== teÃ¤st ===

--------------------------------------------------------------------------------

    (program
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))))

===========
Next knot
===========

=== test ===
=== test ===

--------------------------------------------------------------------------------

    (program
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end)))
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))))

=================
Knot and stitches
=================

=== test ===
=== test ===
 = test
asd
 = test
asd

--------------------------------------------------------------------------------

    (program
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end)))
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))
        (stitch
          (stitch_header
            (stitch_start)
            (identifier)
            (line_end))
          (weave_body
            (weave_body_line
              (body_start)
              (dialog_text
                (text
                  (vocabular)))
              (line_end))))
        (stitch
          (stitch_header
            (stitch_start)
            (identifier)
            (line_end))
          (weave_body
            (weave_body_line
              (body_start)
              (dialog_text
                (text
                  (vocabular)))
              (line_end))))))

=====================
Knot with simple body
=====================

=== test ===
body
=== test ===

--------------------------------------------------------------------------------

    (program
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))
        (weave_body
          (weave_body_line
            (body_start)
            (dialog_text
              (text
                (vocabular)))
            (line_end))))
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))))


======
Divert
======

asdf-sdf -> test
=== test ===
test

--------------------------------------------------------------------------------

    (program
      (weave_body
        (weave_body_line
          (body_start)
          (dialog_text
            (text
              (vocabular))
            (divert
              (arrow)
              (identifier)))
          (line_end)))
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))
        (weave_body
          (weave_body_line
            (body_start)
            (dialog_text
              (text
                (vocabular)))
            (line_end)))))

================
Illegal divert 1
================

asdsdf -> test asdf
=== huhu ===

--------------------------------------------------------------------------------

    (program
      (weave_body
        (weave_body_line
          (body_start)
          (dialog_text
            (text
              (vocabular))
            (divert
              (arrow)
              (identifier)))
          (ERROR
            (vocabular))
          (line_end)))
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))))

================
Illegal divert 2
================

asdsdf ->
=== huhu ===

--------------------------------------------------------------------------------

    (program
      (weave_body
        (weave_body_line
          (body_start)
          (dialog_text
            (text
              (vocabular)))
          (ERROR
            (arrow))
          (line_end)))
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))))

===========
End newline
===========

=== teet ===


--------------------------------------------------------------------------------

    (program
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))))

=========
End space
=========

=== teet ===
 

--------------------------------------------------------------------------------

    (program
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))
        (weave_body)))

==========
Empty line
==========

=== teet ===
a

b

--------------------------------------------------------------------------------

    (program
      (knot
        (knot_header
          (knot_start)
          (identifier)
          (line_end))
        (weave_body
          (weave_body_line
            (body_start)
            (dialog_text
              (text
                (vocabular)))
            (line_end))
          (weave_body_line
            (body_start)
            (dialog_text
              (text
                (vocabular)))
            (line_end)))))

=============
Spaces at end
=============
a 

--------------------------------------------------------------------------------

    (program
      (weave_body
        (weave_body_line
          (body_start)
          (dialog_text
            (text
              (vocabular)
              (other)))
          (line_end))))
